@inherits DotNetNuke.Web.Mvc.Framework.DnnWebViewPage
@{
    var topCategories = ViewBag.TopCategories as List<string> ?? new List<string>();

    // Mapping: megjelenített név → link végződés
    var linkMap = new Dictionary<string, string>(StringComparer.InvariantCultureIgnoreCase)
{
        { "Fás illatok", "fc3a1s-illatok" },
        { "Friss illatok", "friss-illatok" },
        { "Fűszeres illatok", "fc5b1szeres-illatok" },
        { "Púderes illatok", "pc3baderes-illatok" },
        { "Édes illatok", "c3a9des-illatok" },
        { "Gyümölcsös illatok", "gyc3bcmc3b6lcsc3b6s-illatok" },
        { "Orientális illatok", "orientc3a1lis-illatok" },
        { "Virágos illatok", "virc3a1gos-illatok" }
    };

    string baseUrl = "http://rendfejl1011.northeurope.cloudapp.azure.com:8080/Termékek/";
}

<div class="dnnForm dnnClear">
    <h2 style="margin-bottom: 20px;">🎉 Illat teszt eredménye</h2>

    @if (topCategories.Count > 0)
    {
        <p>A válaszaid alapján a következő illatkategóriákat ajánljuk:</p>

        <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px;">
            @foreach (var cat in topCategories)
            {
                string urlPart = linkMap.ContainsKey(cat) ? linkMap[cat] : "";
                string link = baseUrl + urlPart;

                <a href="@link" target="_blank" style="text-decoration: none;">
                    <div style="border: 1px solid #ccc; border-radius: 8px; padding: 15px 20px; min-width: 200px; background-color: #f9f9f9; box-shadow: 0 0 5px rgba(0,0,0,0.1); transition: all 0.2s;">
                        <span style="font-size: 1.2em;">🌸 @cat</span>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">Kattints a hozzá tartozó termékekhez</div>
                    </div>
                </a>
            }
        </div>
    }
    else
    {
        <div class="dnnFormMessage dnnFormWarning">
            Sajnos nem tudtunk ajánlást készíteni a válaszaid alapján.
        </div>
    }
</div>
